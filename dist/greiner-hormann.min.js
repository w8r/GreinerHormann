/*
 MIT
 @author Milevski Alexander (c) 2014
 @preserve
*/
(function(p){"object"===typeof exports&&"undefined"!==typeof module?module.exports=p():"function"===typeof define&&define.G?define([],p):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).greinerHormann=p()})(function(){return function b(k,g,c){function l(e,f){if(!g[e]){if(!k[e]){var d="function"==typeof require&&require;if(!f&&d)return d(e,!0);if(a)return a(e,!0);d=Error("Cannot find module '"+e+"'");throw d.code="MODULE_NOT_FOUND",d;}d=g[e]=
{exports:{}};k[e][0].call(d.exports,function(a){var b=k[e][1][a];return l(b?b:a)},d,d.exports,b,k,g,c)}return g[e].exports}for(var a="function"==typeof require&&require,e=0;e<c.length;e++)l(c[e]);return l}({1:[function(k,g){var c=k("./polygon");g.exports=function(b,l,a,e){b=new c(b);l=new c(l);return b.clip(l,a,e)}},{"./polygon":4}],2:[function(k,g){var c=k("./clip");g.exports={union:function(b,l){return c(b,l,!1,!1)},intersection:function(b,l){return c(b,l,!0,!0)},diff:function(b,l){return c(b,l,
!1,!0)},clip:c}},{"./clip":1}],3:[function(k,g){function c(b,c,a,e){this.m=this.toSource=this.y=this.x=0;var m=(e.y-a.y)*(c.x-b.x)-(e.x-a.x)*(c.y-b.y);0!==m&&(this.toSource=((e.x-a.x)*(b.y-a.y)-(e.y-a.y)*(b.x-a.x))/m,this.m=((c.x-b.x)*(b.y-a.y)-(c.y-b.y)*(b.x-a.x))/m,this.valid()&&(this.x=b.x+this.toSource*(c.x-b.x),this.y=b.y+this.toSource*(c.y-b.y)))}c.prototype.valid=function(){return 0<this.toSource&&1>this.toSource&&0<this.m&&1>this.m};g.exports=c},{}],4:[function(k,g){function c(a,e){this.s=
this.first=null;this.u="undefined"===typeof e?Array.isArray(a[0]):e;for(var c=0,f=a.length;c<f;c++)this.j(new b(a[c]))}var b=k("./vertex"),l=k("./intersection");c.prototype.j=function(a){if(null==this.first)this.first=a,this.first.next=a,this.first.f=a;else{var e=this.first,b=e.f;e.f=a;a.next=e;a.f=b;b.next=a}};c.prototype.w=function(a,b,c){for(;!b.c(c)&&b.o<a.o;)b=b.next;a.next=b;c=b.f;a.f=c;c.next=a;b.f=a};c.prototype.l=function(a){for(;a.a;)a=a.next;return a};c.prototype.D=function(){var a=this.C||
this.first;do{if(a.a&&!a.h)break;a=a.next}while(!a.c(this.first));return this.C=a};c.prototype.F=function(){var a=this.s||this.first;do{if(a.a&&!a.h)return this.s=a,!0;a=a.next}while(!a.c(this.first));this.s=null;return!1};c.prototype.b=function(){var a=[],b=this.first;if(this.u){do a.push([b.x,b.y]),b=b.next;while(b!==this.first)}else{do a.push({x:b.x,y:b.y}),b=b.next;while(b!==this.first)}return a};c.prototype.clip=function(a,e,g){var f=this.first,d=a.first,k=!e&&!g;do{if(!f.a){do{if(!d.a){var h=
new l(f,this.l(f.next),d,a.l(d.next));if(h.valid()){var n=b.v(h.x,h.y,h.toSource);h=b.v(h.x,h.y,h.m);n.g=h;h.g=n;this.w(n,f,this.l(f.next));a.w(h,d,a.l(d.next))}}d=d.next}while(!d.c(a.first))}f=f.next}while(!f.c(this.first));f=this.first;d=a.first;n=f.A(a);h=d.A(this);e^=n;g^=h;do f.a&&(f.i=e,e=!e),f=f.next;while(!f.c(this.first));do d.a&&(d.i=g,g=!g),d=d.next;while(!d.c(a.first));for(f=[];this.F();){d=this.D();var m=new c([],this.u);m.j(new b(d.x,d.y));do{d.B();if(d.i){do d=d.next,m.j(new b(d.x,
d.y));while(!d.a)}else{do d=d.f,m.j(new b(d.x,d.y));while(!d.a)}d=d.g}while(!d.h);f.push(m.b())}0===f.length&&(k?(n&&f.push(a.b()),h&&f.push(this.b())):e&&g?(n&&f.push(a.b(),this.b()),h&&f.push(this.b(),a.b())):(n&&f.push(this.b()),h&&f.push(a.b())),0===f.length&&(f=null));return f};g.exports=c},{"./intersection":3,"./vertex":5}],5:[function(k,g){function c(b,c){1===arguments.length&&(Array.isArray(b)?(c=b[1],b=b[0]):(c=b.y,b=b.x));this.x=b;this.y=c;this.g=this.f=this.next=null;this.o=0;this.i=!0;
this.h=this.a=!1}c.v=function(b,g,a){b=new c(b,g);b.o=a;b.a=!0;b.i=!1;return b};c.prototype.B=function(){this.h=!0;null===this.g||this.g.h||this.g.B()};c.prototype.c=function(b){return this.x===b.x&&this.y===b.y};c.prototype.A=function(b){var c=!1,a=b.first,e=a.next,g=this.x,f=this.y;do(a.y<f&&e.y>=f||e.y<f&&a.y>=f)&&(a.x<=g||e.x<=g)&&(c^=a.x+(f-a.y)/(e.y-a.y)*(e.x-a.x)<g),a=a.next,e=a.next||b.first;while(!a.c(b.first));return c};g.exports=c},{}]},{},[2])(2)});
